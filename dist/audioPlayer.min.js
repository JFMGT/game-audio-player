const AudioPlayer=(()=>{const e="audioPlayer_progress_",t=[];return{init:function(){document.querySelectorAll(".game-audio").forEach((a=>function(a){const n=a.dataset.src;if(!n)return console.warn("AudioPlayer: kein data-src gefunden",a);const r=a.dataset.title||"",d=a.dataset.credit||"",o=a.dataset.creditUrl||"";let c=[];try{c=JSON.parse(a.dataset.markers||"[]")}catch(e){console.error("AudioPlayer: Marker-JSON ungÃ¼ltig",e)}const i=document.createElement("div");if(i.classList.add("audio-player"),r){const e=document.createElement("div");e.classList.add("audio-title"),e.textContent=r,i.appendChild(e)}const s=document.createElement("audio");s.src=n,s.controls=!0,i.appendChild(s);const l=localStorage.getItem(e+n);l&&(s.currentTime=parseFloat(l));if(s.addEventListener("timeupdate",(()=>{localStorage.setItem(e+n,s.currentTime)})),s.addEventListener("play",(()=>{t.forEach((e=>{e!==s&&e.pause()}))})),c.length>0){const e=document.createElement("div");e.classList.add("audio-markers"),c.forEach((t=>{const a=document.createElement("button");a.textContent=t.label||function(e){const t=Math.floor(e/60),a=Math.floor(e%60);return`${t}:${a.toString().padStart(2,"0")}`}(t.time),a.classList.add("audio-marker"),a.addEventListener("click",(()=>{s.currentTime=t.time,s.play()})),e.appendChild(a)})),i.appendChild(e)}if(d){const e=document.createElement("div");if(e.classList.add("audio-credit"),o){const t=document.createElement("a");t.href=o,t.target="_blank",t.rel="noopener noreferrer",t.textContent=d,e.appendChild(t)}else e.textContent=d;i.appendChild(e)}a.replaceWith(i),t.push(s)}(a)))}}})();document.addEventListener("DOMContentLoaded",AudioPlayer.init);